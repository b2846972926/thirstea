import{a as l}from"./index-t--hEgTQ.js";import{c as r,a as t,F as g,i as _,f as b,o as n,p as y,t as i,g as d,e as k}from"./index-CRQ1Ln7N.js";import{_ as m}from"./plugin-vueexport-helper-DlAUqK2U.js";const $={data(){return{products:[],status:{loadingItem:""}}},methods:{async getProducts(){const e="https://vue3-course-api.hexschool.io/api/rosie-api/products/all",o=this.$loading.show(),a=await l.get(e);this.products=a.data.products,console.log("products:",a),o.hide()},async addCart(e){const o="https://vue3-course-api.hexschool.io/api/rosie-api/cart";this.status.loadingItem=e;const a={product_id:e,qty:1},c=await l.post(o,{data:a});this.status.loadingItem="",console.log(c),this.getCart(),b.emit("update-cart")},async getCart(){const e="https://vue3-course-api.hexschool.io/api/rosie-api/cart",o=this.$loading.show(),a=await l.get(e);console.log(a),this.cart=a.data.data,o.hide()},getProduct(e){this.$router.push(`/products/${e}`)}},created(){this.getProducts()}},v={class:"col-md-7"},x={class:"table align-middle"},f={style:{width:"200px"}},C={href:"#",class:"text-dark"},w={key:0,class:"h5"},I={key:1,class:"h6"},P={key:2,class:"h5"},B={class:"btn-group btn-group-sm"},N=["onClick"],V=["disabled","onClick"],z={key:0,class:"spinner-grow text-danger spinner-grow-sm",role:"status"};function F(e,o,a,c,p,u){return n(),r("div",v,[t("table",x,[o[2]||(o[2]=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1)),t("tbody",null,[(n(!0),r(g,null,_(p.products,s=>(n(),r("tr",{key:s.id},[t("td",f,[t("div",{style:y([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${s.imageUrl})`}])},null,4)]),t("td",null,[t("a",C,i(s.title),1)]),t("td",null,[s.price?d("",!0):(n(),r("div",w,i(s.origin_price)+" 元",1)),s.price?(n(),r("del",I,"原價 "+i(s.origin_price)+" 元",1)):d("",!0),s.price?(n(),r("div",P,"現在只要 "+i(s.price)+" 元",1)):d("",!0)]),t("td",null,[t("div",B,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:h=>u.getProduct(s.id)}," 查看更多 ",8,N),t("button",{type:"button",class:"btn btn-outline-danger",disabled:this.status.loadingItem===s.id,onClick:h=>u.addCart(s.id)},[this.status.loadingItem===s.id?(n(),r("div",z,o[0]||(o[0]=[t("span",{class:"visually-hidden"},"Loading...",-1)]))):d("",!0),o[1]||(o[1]=k(" 加到購物車 "))],8,V)])])]))),128))])])])}const q=m($,[["render",F]]);export{q as default};
