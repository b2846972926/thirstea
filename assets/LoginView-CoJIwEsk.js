import{a as i}from"./index-t--hEgTQ.js";import{c as p,a as o,h as l,v as u,d as c,o as m}from"./index-BwezMRDU.js";import{_ as h}from"./plugin-vueexport-helper-DlAUqK2U.js";const f={data(){return{user:{username:"",password:""}}},methods:{async signIn(){const a="https://vue3-course-api.hexschool.io/admin/signin",s=this.$loading.show(),t=await i.post(a,this.user);if(s.hide(),t.data.success){const{token:n,expired:e}=t.data;document.cookie=`hexToken=${n}; expires=${new Date(e)}`,this.$router.push("/dashboard/products")}}},async created(){const a=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");i.defaults.headers.common.Authorization=a;const s="https://vue3-course-api.hexschool.io/api/user/check",t=this.$loading.show(),n=await i.post(s);t.hide(),n.data.success&&this.$router.push("/dashboard/products")}},w={class:"container mt-5"},b={class:"col-md-6"},v={class:"mb-2"},x={class:"mb-2"};function k(a,s,t,n,e,d){return m(),p("div",w,[o("form",{class:"row justify-content-center",onSubmit:s[2]||(s[2]=c((...r)=>d.signIn&&d.signIn(...r),["prevent"]))},[o("div",b,[s[5]||(s[5]=o("h1",{class:"h3 mb-3 font-weight-normal"},"請先登入",-1)),o("div",v,[s[3]||(s[3]=o("label",{for:"inputEmail",class:"sr-only"},"Email address",-1)),l(o("input",{type:"email",id:"inputEmail",class:"form-control",placeholder:"Email address",required:"",autofocus:"","onUpdate:modelValue":s[0]||(s[0]=r=>e.user.username=r)},null,512),[[u,e.user.username]])]),o("div",x,[s[4]||(s[4]=o("label",{for:"inputPassword",class:"sr-only"},"Password",-1)),l(o("input",{type:"password",id:"inputPassword",class:"form-control",placeholder:"Password",required:"","onUpdate:modelValue":s[1]||(s[1]=r=>e.user.password=r)},null,512),[[u,e.user.password]])]),s[6]||(s[6]=o("div",{class:"text-end mt-4"},[o("button",{class:"btn btn-lg btn-primary btn-block",type:"submit"},"登入")],-1))])],32)])}const E=h(f,[["render",k],["__scopeId","data-v-3a520ba5"]]);export{E as default};
