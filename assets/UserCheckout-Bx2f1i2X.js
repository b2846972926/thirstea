import{a as u}from"./index-t--hEgTQ.js";import{c as l,a as t,h as a,F as p,i as c,t as r,b as h,o as d}from"./index-BT1hBpK7.js";import{_ as m}from"./plugin-vueexport-helper-DlAUqK2U.js";const f={data(){return{order:{user:{}},orderId:""}},methods:{async getOrder(){const n=`https://vue3-course-api.hexschool.io/api/rosie-api/order/${this.orderId}`,s=await u.get(n);s.data.success&&(this.order=s.data.order,console.log(this.order))},async payOrder(){const n=`https://vue3-course-api.hexschool.io/api/rosie-api/pay/${this.orderId}`,s=await u.post(n);console.log(s),s.data.success&&this.getOrder()}},created(){this.orderId=this.$route.params.orderId,console.log(this.orderId),this.getOrder()}},y={class:"my-5 row justify-content-center"},b={class:"table align-middle"},g={class:"text-end"},x={class:"text-end"},_={class:"table"},k={key:0},I={key:1,class:"text-success"},O={key:0,class:"text-end"};function v(n,s,w,B,e,i){return d(),l("div",y,[t("form",{class:"col-md-6",onSubmit:s[0]||(s[0]=h((...o)=>i.payOrder&&i.payOrder(...o),["prevent"]))},[t("table",b,[s[2]||(s[2]=t("thead",null,[t("th",null,"品名"),t("th",null,"數量"),t("th",null,"單價")],-1)),t("tbody",null,[(d(!0),l(p,null,c(e.order.products,o=>(d(),l("tr",{key:o.id},[t("td",null,r(o.product.title),1),t("td",null,r(o.qty)+"/"+r(o.product.unit),1),t("td",g,r(o.final_total),1)]))),128))]),t("tfoot",null,[t("tr",null,[s[1]||(s[1]=t("td",{colspan:"2",class:"text-end"},"總計",-1)),t("td",x,r(e.order.total),1)])])]),t("table",_,[t("tbody",null,[t("tr",null,[s[3]||(s[3]=t("th",{width:"100"},"Email",-1)),t("td",null,r(e.order.user.email),1)]),t("tr",null,[s[4]||(s[4]=t("th",null,"姓名",-1)),t("td",null,r(e.order.user.name),1)]),t("tr",null,[s[5]||(s[5]=t("th",null,"收件人電話",-1)),t("td",null,r(e.order.user.tel),1)]),t("tr",null,[s[6]||(s[6]=t("th",null,"收件人地址",-1)),t("td",null,r(e.order.user.address),1)]),t("tr",null,[s[7]||(s[7]=t("th",null,"付款狀態",-1)),t("td",null,[e.order.is_paid?(d(),l("span",I,"付款完成")):(d(),l("span",k,"尚未付款"))])])])]),e.order.is_paid===!1?(d(),l("div",O,s[8]||(s[8]=[t("button",{class:"btn btn-danger"},"確認付款去",-1)]))):a("",!0)],32)])}const N=m(f,[["render",v]]);export{N as default};
